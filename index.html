<!DOCTYPE html>
<html>
 <body onLoad="run();">
 	<div id="Disclaimer"></div>
 	<div id="Navigation"></div>
 	<div id="Contents"></div>
 	
	<script>
	document.langs = [];
	function setuplangs(xmlDoc)
	{
		document.getElementById("Contents").innerHTML=('<form action=""><input type="checkbox" name="lang" value="EN" onclick="checkAddress(this)">English<br><input type="checkbox" name="lang" value="NL" onclick="checkAddress(this)">Nederlands<br><input type="checkbox" name="lang" value="FR" onclick="checkAddress(this)">Frans<br></form>');
		document.writeln("<h2>Filters</h2>");
		document.writeln("<h3>Languages</h3>");
		var languages = xmlDoc.getElementsByTagName("language");
		//document.writeln('<form action="">');
		document.writeln('<div id="cbs"> </div>');
		for (i = 0; i < languages.length; i++){
			//document.writeln('<input type="checkbox" name="lang" value="' + languages[i].getAttribute("tag") + '" onclick="checkAddress(this)"' + '>' + languages[i].childNodes[0].nodeValue + '<br>');
			alert(i);
			// create the necessary elements
			var label= document.createElement("label");
			var description = document.createTextNode(languages[i].childNodes[0].nodeValue);
			var checkbox = document.createElement("input");
			
			checkbox.type = "checkbox";    // make the element a checkbox
			checkbox.name = "lang";      // give it a name we can check on the server side
			checkbox.value = languages[i].getAttribute("tag");         // make its value "pair"
			checkbox.onclick = "function(){checkAddress(this);}";
			
			label.appendChild(checkbox);   // add the box to the element
			label.appendChild(description);// add the description to the element
			label.appendChild(document.createElement("br"));
			// add the label element to your div
			document.getElementById('cbs').appendChild(label);
		}
		
		//document.writeln('</form>');
		var langboxes = document.getElementsByName("lang");
		for (var i = 0; i < langboxes .length; i++){
		    langboxes[i].checked = true;
		}
		
	}
	function checkAddress(checkbox)
	{
	    var langboxes = document.getElementsByName("lang");
	    langs = [];
	    for (var i = 0; i < langboxes .length; i++){
	        if (langboxes [i].checked){
	            langs.push(langboxes[i].value);
	        }
	    }
	    alert(langs);
	}
	
	function loadXMLDoc(filename)
	 {
	 var xhttp;
	 if (window.XMLHttpRequest)
	   {
	   xhttp=new XMLHttpRequest();
	   }
	 else // code for IE5 and IE6
	   {
	   xhttp=new ActiveXObject("Microsoft.XMLHTTP");
	   }
	 xhttp.onreadystatechange=function()
	   {
	   if (xhttp.readyState==4 && xhttp.status==200)
	     {
	     }
	   }
	 xhttp.open("GET",filename,true);
	 xhttp.send();
	 return xhttp.responseXML;
	 } 
	 
	function run() { 
		
		xmlDoc = loadXMLDoc("classified_links.xml");
		//setuplangs(xmlDoc);
		var c = xmlDoc.getElementsByTagName("classification");
		for (i=0; i < c.length; i++){
			document.getElementById("Contents").insertAdjacentHTML('beforeend', "<h2>" + c[i].getAttribute("name") + "</h2>");
			childs = c[i].childNodes;
			for (j = 0; j < childs.length; j++){
				child = childs[j];
				document.getElementById("Contents").insertAdjacentHTML('beforeend', "<h3>" + child.getAttribute("type") + "</h3>");
				entries = child.childNodes;
				document.getElementById("Contents").insertAdjacentHTML('beforeend', "<table border='1'>");
				
				document.getElementById("Contents").insertAdjacentHTML('beforeend', "<tr><td>");
				document.getElementById("Contents").insertAdjacentHTML('beforeend', "</td><td>");
				document.getElementById("Contents").insertAdjacentHTML('beforeend', "<b>Title</b>");
				document.getElementById("Contents").insertAdjacentHTML('beforeend', "</td><td>");
				document.getElementById("Contents").insertAdjacentHTML('beforeend', "<b>Author</b>");
				document.getElementById("Contents").insertAdjacentHTML('beforeend', "</td><td>");
				document.getElementById("Contents").insertAdjacentHTML('beforeend', "<b>Description</b>");
				document.getElementById("Contents").insertAdjacentHTML('beforeend', "</td><td>");
				document.getElementById("Contents").insertAdjacentHTML('beforeend', "</td></tr>");
				for(k = 0; k < entries.length; k++){
					entry = entries[k];
					var text;
					document.getElementById("Contents").insertAdjacentHTML('beforeend', "<tr><td>");
					var text = entry.getAttribute("language");
					document.getElementById("Contents").insertAdjacentHTML('beforeend', text);
					document.getElementById("Contents").insertAdjacentHTML('beforeend', "</td><td>");
					var text = entry.getAttribute("title");
					document.getElementById("Contents").insertAdjacentHTML('beforeend', text);
					document.getElementById("Contents").insertAdjacentHTML('beforeend', "</td><td>");
					var text = entry.getAttribute("author");
					document.getElementById("Contents").insertAdjacentHTML('beforeend', text);
					document.getElementById("Contents").insertAdjacentHTML('beforeend', "</td><td>");
					var text = entry.getAttribute("description");
					document.getElementById("Contents").insertAdjacentHTML('beforeend', text);
					document.getElementById("Contents").insertAdjacentHTML('beforeend', "</td><td>");
					var text = entry.getAttribute("url");
					document.getElementById("Contents").insertAdjacentHTML('beforeend', "<a href=" + text + ">Visit</a>");
					document.getElementById("Contents").insertAdjacentHTML('beforeend', "</td></tr>");
				}
				document.getElementById("Contents").insertAdjacentHTML('beforeend', "</table>");
			}
		}
	}
	</script>
 
</body>
 </html>
 
