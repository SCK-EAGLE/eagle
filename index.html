<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="style.css">
	<title>Ionizing Radiation Information HUB</title>
</head>
 <body>
 	<div id="maindiv">
 		
 	</div>
 
	<script>
	document.write=function(s){
		var element = document.getElementById("maindiv");
		element.insertAdjacentHTML("beforebegin", s);
	};
	document.writeln=function(s){
		//var scripts = document.getElementsByTagName('script');
	    	//scripts[scripts.length-1].insertAdjacentHTML("beforebegin", s);
	    	var element = document.getElementById("maindiv");
		element.insertAdjacentHTML("beforebegin", s + );
	};
	document.addCreatedElement=function(element){
		var container = document.getElementById("maindiv");
		container.appendChild(element);
		alert(container.nodeValue);
	};
	
	function setuplangs(xmlDoc)
	{
		//document.writeln('<form action=""><input type="checkbox" name="lang" value="EN" onclick="checkAddress(this)">English<br><input type="checkbox" name="lang" value="NL" onclick="checkAddress(this)">Nederlands<br><input type="checkbox" name="lang" value="FR" onclick="checkAddress(this)">Frans<br></form>');
		document.writeln("<h2>Filters</h2>");
		document.writeln("<h3>Languages</h3>");
		var languages = xmlDoc.getElementsByTagName("language");
		//document.writeln('<form action="">');
		document.writeln('<div id="cbs"> </div>');
		for (i = 0; i < languages.length; i++){
			document.writeln('<input type="checkbox" name="lang" value="' + languages[i].getAttribute("tag") + '" onclick="javascript:try{document.checkAddress()}catch(e){alert(e)}"' + '>' + languages[i].childNodes[0].nodeValue + '<br>');
		}
		
		

		//document.writeln('</form>');
		var langboxes = document.getElementsByName("lang");
		document.langs = [];
		for (var i = 0; i < langboxes .length; i++){
		    langboxes[i].checked = true;
		    document.langs.push(langboxes[i].getAttribute("value"));
		}
		
	}
	
	function loadXMLDoc(filename)
	 {
	 var xhttp;
	 if (window.XMLHttpRequest)
	   {
	   xhttp=new XMLHttpRequest();
	   }
	 else // code for IE5 and IE6
	   {
	   xhttp=new ActiveXObject("Microsoft.XMLHTTP");
	   }
	 xhttp.open("GET",filename,false);
	 xhttp.send();
	 return xhttp.responseXML;
	 }
	 
	function run() { 
		alert("test");
		document.writeln("<h1>Disclaimer</h1>");
		document.writeln("<p><i>");
		document.write("This website contains links to other websites which are hosted and maintained by third");
		document.write("parties. EAGLE has no control over the content or security of any such external website. "); 
		document.write("Linking to external websites is at the own risk of the user, and EAGLE cannot be held ");
		document.write("liable as to their content. EAGLE can also not be liable for any loss or damage arising ");
		document.write("from the use of such third party websites.<br>If you want to provide internet sources that ");
		document.write("can be an added value to this project, please send this information to the following e-mail ");
		document.write("address: <a href=\"mailto:eagle_secretariat@rec-lj.si\">eagle_secretariat@rec-lj.si</a>. The ");
		document.writeln("information will then be reviewed, and put online if it is suitable.");
		document.writeln("</i></p>");
		
			
		var c = xmlDoc.getElementsByTagName("classification");
		alert("test");
		for (i=0; i < c.length; i++){
			document.write("<h2>" + c[i].getAttribute("name") + "</h2>");
			childs = c[i].getElementsByTagName("list");
			for (j = 0; j < childs.length; j++){
				child = childs[j];
				document.write("<h3>"+child.getAttribute("type")+"</h3>");
				entries = child.getElementsByTagName("entry");
				alert("test1");
				var table = document.createElement('table');
				alert("test2");
  				table.setAttribute('border', '1');

				table.innerHTML = "<table border='1'>";
				table.innerHTML += "<tr><td>";
				table.innerHTML +=("</td><td>");
				table.innerHTML +=("<b>Title</b>");
				table.innerHTML +=("</td><td>");
				table.innerHTML +=("<b>Author</b>");
				table.innerHTML +=("</td><td>");
				table.innerHTML +=("<b>Description</b>");
				table.innerHTML +=("</td><td>");
				table.innerHTML +=("</td></tr>");
				for(k = 0; k < entries.length; k++){
					//alert("testing: " + document.langs);
					entry = entries[k];
					if (document.langs.indexOf(entry.getAttribute("language")) != -1){
					var text;
					table.innerHTML +=("<tr><td>");
					var text = entry.getAttribute("language");
					table.innerHTML +=(text);
					table.innerHTML +=("</td><td>");
					var text = entry.getAttribute("title");
					table.innerHTML +=(text);
					table.innerHTML +=("</td><td>");
					var text = entry.getAttribute("author");
					table.innerHTML +=(text);
					table.innerHTML +=("</td><td>");
					var text = entry.getAttribute("description");
					table.innerHTML +=(text);
					table.innerHTML +=("</td><td>");
					var text = entry.getAttribute("url");
					table.innerHTML +=("<a href=" + text + ">Visit</a>");
					table.innerHTML +=("</td></tr>");
					}
				}
				table.innerHTML +=("</table>");
				document.addCreatedElement(table);
			}
		}
	}
	
	document.checkAddress = function (){
	    var langboxes = document.getElementsByName("lang");
	    document.langs = [];
	    for (var i = 0; i < langboxes .length; i++){
	        if (langboxes [i].checked){
	            document.langs.push(langboxes[i].value);
	        }
	    }
	    document.close();
	    document.open();
	    run();
	};
	
	var xmlDoc;
	
	window.onload = function() {
		alert("test");
		document.langs = [];
		xmlDoc = loadXMLDoc("classified_links.xml");
		setuplangs(xmlDoc);
    		run();
	};
	</script>
 
</body>
</html>
 
